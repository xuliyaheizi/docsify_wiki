# 22年6月14日小记

## 分布式锁

## form表单进行文件上传

form表单进行文件上传会刷新页面并跳转，不适应需求，需求为文件上传后页面无需刷新和跳转，只刷新显示内容。

> Form表单是将文件转换成二级制字节流，然后使用http协议进行传输。

```vue
<form id="form" action="hdfs/upload.do" enctype="multipart/form-data" method="post" target="frameName">
    <input type="file" name="uploadFile">
    <input type="submit" value="上传" @click="upload">
    <input type="hidden" id="currentPath" name="currentPath" v-model="currentPath">
</form>
```

将form的target属性绑定到自定义窗口iframe（窗口样式设置为隐藏），使得form的页面刷新和跳转只在iframe中处理。并且为上传按钮绑定一个回调函数，在文件上传后对显示内容进行刷新。

!> 暂未对iframe进行解析获取后端传输的数据，无法判断文件是否上传成功。

```html
<iframe id="iframe" style="display: none" src="" frameborder="0" name="frameName"></iframe>

//文件上传
upload() {
	this.listFile(this.currentPath);
},
```

